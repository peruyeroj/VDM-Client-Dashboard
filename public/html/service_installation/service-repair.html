<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Installation Request</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css"
    />
    <style>
      input[type="tel"] {
        max-width: 200px;
      }
    </style>
  </head>
  <body>
    <script src="/public/js/Navbar.js"></script>
    <nav-bar></nav-bar>
    <form
      method="post"
      action="../../../src/App/send-email.php"
      id="installation-form"
    >
      <div id="service-repair-fields" class="content">
        <div class="section">
          <h3>Reporter's Information (Individual reporting service repair)</h3>
          <label>Reporter's Name:</label>
          <input type="text" name="reporterName" />
          <label
            >Complaint Details (The service or repair that is being
            requested):</label
          >
          <textarea name="complaintDetails"></textarea>
          <label>Mobile Number:</label>
          <input type="text" name="reporterMobile" />
          <label>Email:</label>
          <input type="email" name="reporterEmail" />
        </div>
        <div class="section">
          <h3>Onsite Contact Information</h3>
          <label>Onsite Contact Name:</label>
          <input type="text" name="onsiteContactName" />
          <label>Mobile Number:</label>
          <input type="text" name="onsiteContactMobile" />
          <label>Email:</label>
          <input type="email" name="onsiteContactEmail" />
        </div>
        <div class="section">
          <h3>Preferred Service Repair Date</h3>
          <div class="flex-row">
            <input
              type="date"
              name="serviceRepairDate"
              class="small-date-input"
            />
            <label
              ><input type="checkbox" name="serviceRepairASAP" /> ASAP</label
            >
          </div>
        </div>
      </div>
      <button type="submit">Submit</button>
    </form>
    <script>
      function formatPhoneNumber(value) {
        if (!value) return value;
        const phoneNumber = value.replace(/[^\d]/g, "");
        const phoneNumberLength = phoneNumber.length;
        if (phoneNumberLength < 4) return phoneNumber;
        if (phoneNumberLength < 7) {
          return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
        }
        return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(
          3,
          6
        )}-${phoneNumber.slice(6, 10)}`;
      }

      function phoneNumberFormatter() {
        const inputField = document.getElementById("installContactMobile");
        const formattedInputValue = formatPhoneNumber(inputField.value);
        inputField.value = formattedInputValue;
      }

      const phoneNumberField = document.getElementById("installContactMobile");
      phoneNumberField.addEventListener("input", phoneNumberFormatter);
    </script>
  </body>
</html>
